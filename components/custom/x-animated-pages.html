<link rel="import" href="../../components/bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../components/bower_components/paper-styles/demo-pages.html">
<link rel="import" href="../../components/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../components/bower_components/iron-icons/image-icons.html">
<link rel="import" href="../../components/bower_components/paper-button/paper-button.html">
<link rel="import" href="../../components/bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../components/bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../components/bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../components/bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../components/bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../../components/bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../../components/bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../../components/bower_components/paper-item/paper-item.html">
<link rel="import" href="../../components/bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../../components/bower_components/polymer/polymer-micro.html">
<link rel="import" href="../../components/custom/x-options.html">
<dom-module id="x-animated-pages">
  <style>
  .horizontal-section {
      background-color: white;
      padding-top: 6px;
      padding-left: 12px;
      display: inline-block;
      @apply(--shadow-elevation-2dp);
    }
    .blue {
      background-color: white; /*--paper-light-blue-50*/
      color: #03a9f4;  /*--paper-light-blue-500*/
    }
  iron-pages[selected] >{
    background-color: white;
    font-size: 25px;
  }
  iron-selector >{
  padding: 8px;
  }
  neon-animatable[selected] >{
    background-color: white;
    width: 100%;
    height: 100%;
    font-size: 25px;
  }
  </style>
  <template>
    <neon-animated-pages id="pages" entry-animation="[[entryAnimation]]" exit-animation="[[exitAnimation]]">
      <template is="dom-repeat" items="{{session.questions}}">
        <neon-animatable>
          <div class="horizontal-section">
            <h4 id="text">{{item.text}}</h4>
            <x-options on-click="click" question="{{item}}"></x-options>
            <br></br>
            <paper-button id="previous" raised disabled class="blue" on-click="selectPrevious"><iron-icon icon="image:navigate-before"></iron-icon>{{buttonPrevText}}</paper-button>
            <paper-button id="next" raised class="blue" on-click="selectNext">{{buttonNextText}}<iron-icon icon="image:navigate-next"></iron-icon></paper-button>
            <br></br>
          </div>
        </neon-animatable>
      </template>
   </neon-animated-pages>
  </template>
  <script>
    Polymer({
      is:'x-animated-pages',
      properties: {
        session: Object,
        buttonPrevText: String,
        buttonNextText: String,
        entryAnimation: String,
        exitAnimation: String
      },
      attached: function () {
        this.async(function () {
          this.buttonPrevText="prev";
          this.buttonNextText="next";
          this.$.pages.entryAnimation = 'slide-from-left-animation';
          this.$.pages.exitAnimation = 'slide-right-animation';
          this.$.pages.select(this.session.index);
        });
      },
      selectPrevious: function(){
        this.$.pages.entryAnimation = 'slide-from-left-animation';
        this.$.pages.exitAnimation = 'slide-right-animation';
        this.session.index--;
        this.session.eventType = "selectPrevious";
        this.setPrevButtonState(document.querySelectorAll('paper-button#previous'));
        this.setNextButtonState();
        this.$.pages.select(this.session.index);
      },
      selectNext: function(){
        if(this.session.index != this.session.questions.length-1){
          this.$.pages.entryAnimation = 'slide-from-right-animation';
          this.$.pages.exitAnimation = 'slide-left-animation';
          this.session.index++;
          this.session.eventType = "selectNext";
          this.setPrevButtonState(document.querySelectorAll('paper-button#previous'));
          this.setNextButtonState();
          this.$.pages.select(this.session.index);
        }
        else {
          this.session.eventType = "selectFinish";
        }

      },
      setPrevButtonState: function(button){
        if(button)
        {
          if(this.session.index == 0)
          {
              button[this.session.index].disabled = true;
          }
          else
          {
              button[this.session.index].disabled = false;
          }
        }
      },
      setNextButtonState: function(){
        if(this.session.index == this.session.questions.length-1)
        {
          this.buttonNextText = "finish";
        }
        else
        {
          this.buttonNextText = "next";
        }
      },
      click: function(e){
        var model = e.model;
      },
      onhover: function(e){
        // var element = e.currentTarget;
        // if(element){
        //   this.selection = element.id;
        //   element.style.color = '#03a9f4';  //--paper-light-blue-500
        //   element.style.background =  '#e1f5fe'; //--paper-light-blue-50
        // }
      },
      onunhover: function(e){
        // var element = e.currentTarget;
        // if(element){
        //   this.selection = '';
        //   element.style.color = '';
        //   element.style.background = '';
        // }
      },
      ready: function() {
        
      }
    });
  </script>
</dom-module>
